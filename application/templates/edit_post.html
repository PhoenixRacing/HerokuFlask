{% extends 'base.html' %}

{% block styles %}
{{super()}}
<link rel="stylesheet" type="text/css" href="{{url_for('static',filename='css/blog.css')}}">
{% endblock %}

{% block head_scripts %}
{{super()}}
<script src="{{url_for('static', filename='js/tinymce/tinymce.min.js')}}"></script>
<script type="text/javascript">
	tinymce.init({
		selector:"textarea",
		image_list: [ 
		//	 {title: 'My image 1', value: 'http://www.tinymce.com/my1.gif'}, 
		//	 {title: 'My image 2', value: 'http://www.moxiecode.com/my2.gif'}
		] 
	});
</script>
{% endblock %}

{% block body_scripts %}
{{super()}}
<script src="{{url_for('static', filename='js/vendor/jquery.fileupload.js')}}"></script>
<script>
$(function () {
    $('#fileupload').fileupload({
        dataType: 'json',
        done: function (e, data) {
            $.each(data.result.files, function (index, file) {
                $('<p/>').text(file.name).appendTo(document.body);
            });
        }
    });
});
</script>
{% endblock %}

{% block content %}
<div class="row banner">
	<div class="small-9">
		<div class="row">
			<div class="small-offset-4 small-8 columns">
				<h1>{% if post %}Edit{% else %}New{%endif %} Blog Post</h1>
			</div>
			{% from 'forms.html' import render_field, submit %}
			<form method="post" action="{%if post%}{{url_for('edit_post',post_id=post.id)}}{%else%}{{url_for('create_post')}}{%endif%}">
				{{render_field(form.title)}}
				{{render_field(form.body)}}	
				<br>
				{{submit('Save')}}		
			</form>
			<div class="row">
				<div class="small-4 columns">
					<label for="image_upload" class="right">Images</label>
				</div>
				<div class="small-8 columns">
					<input id="fileupload" type="file" name="files[]" data-url="server/php/" multiple>
				</div>
			</div>
			<div class="small-offset-4 small-8 columns">
				<input type="button" value="Upload">
			</div>
		</div>
	</div>
</div>
{% endblock %}